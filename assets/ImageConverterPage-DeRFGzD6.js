import{d as O,r as m,c as r,b as o,g as h,w as k,O as A,l as G,t as l,F as C,e as z,u as N,f as V,h as i}from"./index-BU-hhwBv.js";const D={class:"c-card container mx-auto"},W={class:"mb-6"},$={key:0,class:"mb-6"},J={class:"grid gap-4 md:grid-cols-2"},T={class:"text-center text-sm text-gray-600"},q={class:"mt-4 flex gap-2"},K=["disabled"],Q={key:1,class:"mb-6"},H={class:"mb-2 text-lg font-semibold"},X={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Y={class:"mb-2 flex items-center justify-between"},Z={class:"truncate text-sm font-medium text-gray-800"},ee=["onClick"],te=["src","alt"],oe={class:"mt-2 text-xs text-gray-600"},se={key:2,class:"mb-6"},ne={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ae={class:"mb-2 flex items-center justify-between"},re={class:"truncate text-sm font-medium text-gray-800"},le=["onClick"],ie=["src","alt"],de={class:"mt-2 text-xs text-gray-600"},ce={key:0,class:"text-green-600"},ge=O({__name:"ImageConverterPage",setup(ue){const B=N(),y=m(),a=m([]),d=m([]),b=m("png"),g=m(.8),x=m(!1),R=s=>{const t=s.target.files;t&&(a.value=[],d.value=[],Array.from(t).forEach(n=>{if(n.type.startsWith("image/")){const c=new FileReader;c.onload=u=>{const v=u.target?.result;a.value.push({file:n,name:n.name,size:n.size,preview:v})},c.readAsDataURL(n)}}))},F=s=>{a.value.splice(s,1),d.value=[]},I=async()=>{if(a.value.length!==0){x.value=!0,d.value=[];try{for(const s of a.value){const e=await P(s);e&&d.value.push(e)}}catch(s){console.error("Conversion error:",s),alert("An error occurred during conversion. Please try again.")}finally{x.value=!1}}},P=async s=>new Promise(e=>{const t=new Image;t.onload=()=>{const n=document.createElement("canvas"),c=n.getContext("2d");if(!c){e(null);return}n.width=t.width,n.height=t.height,c.drawImage(t,0,0);let u,v;switch(b.value){case"jpg":u="image/jpeg",v=g.value;break;case"webp":u="image/webp",v=g.value;break;case"png":default:u="image/png";break}n.toBlob(p=>{if(!p){e(null);return}const _=s.size>0?Math.round((s.size-p.size)/s.size*100):0,w=new FileReader;w.onload=E=>{const L=E.target?.result;e({name:S(s.name),blob:p,preview:L,size:p.size,originalSize:s.size,compressionRatio:_>0?_.toString():void 0})},w.readAsDataURL(p)},u,v)},t.src=s.preview}),S=s=>{const e=s.replace(/\.[^/.]+$/,""),t=b.value;return`${e}.${t}`},j=s=>{const e=URL.createObjectURL(s.blob),t=document.createElement("a");t.href=e,t.download=s.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)},f=s=>{if(s===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,n)).toFixed(2))+" "+t[n]},M=()=>{a.value=[],d.value=[],y.value&&(y.value.value="")},U=()=>{B.go(-1)};return(s,e)=>(i(),r("div",D,[o("div",{class:"mb-4"},[o("button",{onClick:U,class:"rounded border border-gray-300 px-4 py-2 font-bold text-gray-800 hover:bg-gray-100"}," Back ")]),e[8]||(e[8]=o("h1",{class:"mb-4 text-2xl font-bold"},"Image Converter",-1)),e[9]||(e[9]=o("p",{class:"mb-4 rounded border border-blue-200 bg-blue-50 p-3 text-sm text-blue-600"}," ℹ️ Upload images and convert them to different formats (PNG, JPG, WEBP). Optional compression available. ",-1)),o("div",W,[e[2]||(e[2]=o("label",{for:"imageInput",class:"mb-2 block text-sm font-medium text-gray-700"}," Select Images: ",-1)),o("input",{id:"imageInput",ref_key:"fileInput",ref:y,type:"file",multiple:"",accept:"image/*",onChange:R,class:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544)]),a.value.length>0?(i(),r("div",$,[e[6]||(e[6]=o("h2",{class:"mb-2 text-lg font-semibold"},"Conversion Options",-1)),o("div",J,[o("div",null,[e[4]||(e[4]=o("label",{class:"mb-2 block text-sm font-medium text-gray-700"},"Output Format:",-1)),k(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>b.value=t),class:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...e[3]||(e[3]=[o("option",{value:"png"},"PNG",-1),o("option",{value:"jpg"},"JPG",-1),o("option",{value:"webp"},"WEBP",-1)])],512),[[A,b.value]])]),o("div",null,[e[5]||(e[5]=o("label",{class:"mb-2 block text-sm font-medium text-gray-700"},"Quality (JPG/WEBP only):",-1)),k(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),type:"range",min:"0.1",max:"1",step:"0.1",class:"w-full"},null,512),[[G,g.value,void 0,{number:!0}]]),o("div",T,l(Math.round(g.value*100))+"%",1)])]),o("div",q,[o("button",{onClick:I,disabled:x.value,class:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700 disabled:opacity-50"},l(x.value?"Converting...":"Convert Images"),9,K),o("button",{onClick:M,class:"rounded border border-gray-300 px-4 py-2 font-bold text-gray-800 hover:bg-gray-100"}," Clear All ")])])):h("",!0),a.value.length>0?(i(),r("div",Q,[o("h2",H,"Selected Files ("+l(a.value.length)+")",1),o("div",X,[(i(!0),r(C,null,z(a.value,(t,n)=>(i(),r("div",{key:n,class:"rounded-md border border-gray-300 bg-gray-50 p-4"},[o("div",Y,[o("span",Z,l(t.name),1),o("button",{onClick:c=>F(n),class:"text-red-500 hover:text-red-700",title:"Remove file"}," ✕ ",8,ee)]),o("img",{src:t.preview,alt:t.name,class:"h-32 w-full rounded object-cover"},null,8,te),o("div",oe,"Size: "+l(f(t.size)),1)]))),128))])])):h("",!0),d.value.length>0?(i(),r("div",se,[e[7]||(e[7]=o("h2",{class:"mb-2 text-lg font-semibold"},"Converted Files",-1)),o("div",ne,[(i(!0),r(C,null,z(d.value,(t,n)=>(i(),r("div",{key:n,class:"rounded-md border border-green-300 bg-green-50 p-4"},[o("div",ae,[o("span",re,l(t.name),1),o("button",{onClick:c=>j(t),class:"rounded bg-green-500 px-2 py-1 text-xs font-bold text-white hover:bg-green-700"}," Download ",8,le)]),o("img",{src:t.preview,alt:t.name,class:"h-32 w-full rounded object-cover"},null,8,ie),o("div",de,[V(" Original: "+l(f(t.originalSize))+" → Converted: "+l(f(t.size))+" ",1),t.compressionRatio?(i(),r("span",ce," ("+l(t.compressionRatio)+"% smaller) ",1)):h("",!0)])]))),128))])])):h("",!0)]))}});export{ge as default};
