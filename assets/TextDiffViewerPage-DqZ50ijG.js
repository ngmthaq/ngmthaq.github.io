import{d as z,r as P,m as M,c as p,b as c,g as A,w as j,l as V,F as B,e as I,u as N,N as O,t as _,h as y}from"./index-BU-hhwBv.js";class q{diff(e,o,t={}){let r;typeof t=="function"?(r=t,t={}):"callback"in t&&(r=t.callback);const a=this.castInput(e,t),f=this.castInput(o,t),m=this.removeEmpty(this.tokenize(a,t)),l=this.removeEmpty(this.tokenize(f,t));return this.diffWithOptionsObj(m,l,t,r)}diffWithOptionsObj(e,o,t,r){var a;const f=d=>{if(d=this.postProcess(d,t),r){setTimeout(function(){r(d)},0);return}else return d},m=o.length,l=e.length;let u=1,i=m+l;t.maxEditLength!=null&&(i=Math.min(i,t.maxEditLength));const g=(a=t.timeout)!==null&&a!==void 0?a:1/0,n=Date.now()+g,s=[{oldPos:-1,lastComponent:void 0}];let h=this.extractCommon(s[0],o,e,0,t);if(s[0].oldPos+1>=l&&h+1>=m)return f(this.buildValues(s[0].lastComponent,o,e));let w=-1/0,T=1/0;const L=()=>{for(let d=Math.max(w,-u);d<=Math.min(T,u);d+=2){let x;const b=s[d-1],v=s[d+1];b&&(s[d-1]=void 0);let D=!1;if(v){const E=v.oldPos-d;D=v&&0<=E&&E<m}const k=b&&b.oldPos+1<l;if(!D&&!k){s[d]=void 0;continue}if(!k||D&&b.oldPos<v.oldPos?x=this.addToPath(v,!0,!1,0,t):x=this.addToPath(b,!1,!0,1,t),h=this.extractCommon(x,o,e,d,t),x.oldPos+1>=l&&h+1>=m)return f(this.buildValues(x.lastComponent,o,e))||!0;s[d]=x,x.oldPos+1>=l&&(T=Math.min(T,d-1)),h+1>=m&&(w=Math.max(w,d+1))}u++};if(r)(function d(){setTimeout(function(){if(u>i||Date.now()>n)return r(void 0);L()||d()},0)})();else for(;u<=i&&Date.now()<=n;){const d=L();if(d)return d}}addToPath(e,o,t,r,a){const f=e.lastComponent;return f&&!a.oneChangePerToken&&f.added===o&&f.removed===t?{oldPos:e.oldPos+r,lastComponent:{count:f.count+1,added:o,removed:t,previousComponent:f.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:o,removed:t,previousComponent:f}}}extractCommon(e,o,t,r,a){const f=o.length,m=t.length;let l=e.oldPos,u=l-r,i=0;for(;u+1<f&&l+1<m&&this.equals(t[l+1],o[u+1],a);)u++,l++,i++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return i&&!a.oneChangePerToken&&(e.lastComponent={count:i,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,u}equals(e,o,t){return t.comparator?t.comparator(e,o):e===o||!!t.ignoreCase&&e.toLowerCase()===o.toLowerCase()}removeEmpty(e){const o=[];for(let t=0;t<e.length;t++)e[t]&&o.push(e[t]);return o}castInput(e,o){return e}tokenize(e,o){return Array.from(e)}join(e){return e.join("")}postProcess(e,o){return e}get useLongestToken(){return!1}buildValues(e,o,t){const r=[];let a;for(;e;)r.push(e),a=e.previousComponent,delete e.previousComponent,e=a;r.reverse();const f=r.length;let m=0,l=0,u=0;for(;m<f;m++){const i=r[m];if(i.removed)i.value=this.join(t.slice(u,u+i.count)),u+=i.count;else{if(!i.added&&this.useLongestToken){let g=o.slice(l,l+i.count);g=g.map(function(n,s){const h=t[u+s];return h.length>n.length?h:n}),i.value=this.join(g)}else i.value=this.join(o.slice(l,l+i.count));l+=i.count,i.added||(u+=i.count)}}return r}}class F extends q{}const R=new F;function S(C,e,o){return R.diff(C,e,o)}const $={class:"c-card container mx-auto"},U={class:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-2"},W={key:0,class:"mb-4"},G={class:"whitespace-pre-wrap rounded-md border border-gray-300 bg-gray-50 p-4 font-mono text-sm"},H={key:1,class:"text-center text-gray-500"},K=z({__name:"TextDiffViewerPage",setup(C){const e=N(),o=P("The quick brown fox jumps over the lazy dog."),t=P("The fast brown fox leaps over the lazy dog."),r=P([]),a=P(!1),f=M(()=>!o.value||!t.value?[]:S(o.value,t.value)),m=()=>{r.value=f.value,a.value=!0},l=async()=>{if(r.value.length===0)return;const g=r.value.map(n=>n.added?`+${n.value}`:n.removed?`-${n.value}`:` ${n.value}`).join("");try{await navigator.clipboard.writeText(g),alert("Diff copied to clipboard!")}catch(n){console.error("Failed to copy: ",n);const s=document.createElement("textarea");s.value=g,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),alert("Diff copied to clipboard!")}},u=()=>{e.go(-1)},i=()=>{o.value="",t.value="",r.value=[],a.value=!1};return(g,n)=>(y(),p("div",$,[c("div",{class:"mb-4"},[c("button",{onClick:u,class:"rounded border border-gray-300 px-4 py-2 font-bold text-gray-800 hover:bg-gray-100"}," Back ")]),n[5]||(n[5]=c("h1",{class:"mb-4 text-2xl font-bold"},"Text Diff Viewer",-1)),n[6]||(n[6]=c("p",{class:"mb-4 rounded border border-blue-200 bg-blue-50 p-3 text-sm text-blue-600"}," ℹ️ Enter the original and modified text below to see the differences highlighted. ",-1)),c("div",U,[c("div",null,[n[2]||(n[2]=c("label",{for:"originalText",class:"mb-2 block text-sm font-medium text-gray-700"}," Original Text: ",-1)),j(c("textarea",{id:"originalText","onUpdate:modelValue":n[0]||(n[0]=s=>o.value=s),placeholder:"Enter the original text here...",class:"h-48 w-full resize-none rounded-md border border-gray-300 p-4 font-mono text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,o.value]])]),c("div",null,[n[3]||(n[3]=c("label",{for:"modifiedText",class:"mb-2 block text-sm font-medium text-gray-700"}," Modified Text: ",-1)),j(c("textarea",{id:"modifiedText","onUpdate:modelValue":n[1]||(n[1]=s=>t.value=s),placeholder:"Enter the modified text here...",class:"h-48 w-full resize-none rounded-md border border-gray-300 p-4 font-mono text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,t.value]])])]),c("div",{class:"mb-4 flex gap-2"},[c("button",{onClick:m,class:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700"}," Compare Texts "),c("button",{onClick:i,class:"rounded border border-gray-300 px-4 py-2 font-bold text-gray-800 hover:bg-gray-100"}," Clear ")]),r.value.length>0?(y(),p("div",W,[c("div",{class:"mb-2 flex items-center justify-between"},[n[4]||(n[4]=c("label",{class:"block text-sm font-medium text-gray-700"},"Differences:",-1)),c("button",{onClick:l,class:"rounded border border-gray-300 px-3 py-1 text-sm font-bold text-gray-800 hover:bg-gray-100"}," Copy Diff ")]),c("div",G,[(y(!0),p(B,null,I(r.value,(s,h)=>(y(),p("span",{key:h,class:O({"bg-green-200 text-green-800":s.added,"bg-red-200 text-red-800":s.removed,"text-gray-900":!s.added&&!s.removed})},_(s.value),3))),128))])])):a.value?(y(),p("div",H," No differences found or texts are identical. ")):A("",!0)]))}});export{K as default};
